generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"  // Changed from "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(cuid())
  username  String   @unique
  password  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  // Relationships
  products  Product[]
  
  @@map("users")
}

model Product {
  id               String   @id @default(cuid())
  productId        String
  productName      String
  openingInventory Int
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  
  // Foreign key
  userId           String
  user             User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  // Relationships
  dailyData        DailyData[]
  
  @@map("products")
}

model DailyData {
  id               String  @id @default(cuid())
  day              Int
  procurementQty   Int     @default(0)
  procurementPrice Float   @default(0)
  salesQty         Int     @default(0)
  salesPrice       Float   @default(0)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  
  // Foreign key
  productId        String
  product          Product @relation(fields: [productId], references: [id], onDelete: Cascade)
  
  @@map("daily_data")
}
